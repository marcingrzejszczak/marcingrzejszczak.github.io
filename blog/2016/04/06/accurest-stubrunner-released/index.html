
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>AccuREST Stub Runner Released - TOO MUCH CODING</title>
  <meta name="author" content="Marcin Grzejszczak">

  
  <meta name="description" content="It&rsquo;s been a good release time recently! I&rsquo;m blogging here at Too Much Coding blog more about releases then about any concrete topics ;) &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://toomuchcoding.com/blog/2016/04/06/accurest-stubrunner-released/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="TOO MUCH CODING" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-74671877-1', 'auto');
  ga('send', 'pageview');

</script>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">TOO MUCH CODING</a></h1>
  
    <h2>A blog for coding addicts by Marcin Grzejszczak</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:toomuchcoding.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/oss/">OSS</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">AccuREST Stub Runner Released</h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-04-06T11:05:58+02:00" pubdate data-updated="true"></time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>It&rsquo;s been a good release time recently! I&rsquo;m blogging here at <a href="http://toomuchcoding.com">Too Much Coding blog</a> more about releases then about any concrete topics ;)</p>

<p>After releasing <a href="/blog/2016/03/25/spring-cloud-sleuth-rc1-deployed/">Spring Cloud Sleuth as a part of Brixton RC1</a> we have just released a version 1.0.4 of <a href="https://github.com/Codearte/accurest">AccuREST</a>. We&rsquo;ve fixed a couple
of bugs but we&rsquo;ve introduced a couple of big features including:</p>

<ul>
<li><a href="https://github.com/Codearte/accurest-maven-plugin">Maven plugin support</a></li>
<li><em>Stub Runner</em> functionality</li>
</ul>


<p>This post will describe the latter feature in more depth.</p>

<!-- more -->


<h2>Introduction</h2>

<p>I&rsquo;ve given quite a few talks about the library called <a href="https://github.com/4finance/micro-infra-spring">Micro-Infra-Spring</a> where I presented how you can profit from the <em>Stub Runner</em> functionality. Since my leaving the company owning that repository, the project is almost not maintained at all. For quite a long time any development was done mostly by me and actually I was the author of most of the <em>Stub Runner&rsquo;s</em> code. Due to the aforementioned and the fact that <em>Stub Runner</em> is tightly coupled with AccuREST&rsquo;s stub generation feature I&rsquo;ve decided to migrate it to the AccuREST&rsquo;s repository.</p>

<h2>AccuREST recap</h2>

<p><em>Stub Runner</em> is tightly coupled with the concepts coming from AccuREST. For more information about AccuREST you can check my <a href="/blog/categories/accurest/">blog entries</a> or check <a href="https://github.com/Codearte/accurest">AccuREST project on Github</a>. If you don&rsquo;t have a clue what that is I&rsquo;ll try to do a very fast recap.</p>

<p>AccuREST is a <a href="http://martinfowler.com/articles/consumerDrivenContracts.html">Consumer Driven Contracts</a> verifier in which you define the contract of your API via a Groovy DSL. From that DSL, on the server side, tests are created to check if your contract is telling the truth. From the <em>Stub Runner&rsquo;s</em> perspective more interesting is the client side. For the client side AccuREST generates WireMock stubs from the provided DSL so that the clients of that API can be provided with reliable stubs.</p>

<h2>What is Stub Runner?</h2>

<p>Now that we remember what AccuREST does we can take a look in more depth at <em>Stub Runner</em>. Let&rsquo;s assume that we have a following flow of services (btw. <a href="http://cloud.spring.io/spring-cloud-sleuth/spring-cloud-sleuth.html">this is a screenshot from Zipkin integrated with Spring Cloud Sleuth</a> )</p>

<p><img src="/images/accurest/stubrunner/dependencies_accurest.png" alt="Dependencies" /></p>

<p>Let&rsquo;s imagine ourselves as developers of the <em>service2</em> - the one that calls <em>service3</em> and <em>service4</em>. Since we&rsquo;re doing the CDC (<a href="http://martinfowler.com/articles/consumerDrivenContracts.html">Consumer Driven Contracts</a>) approach let&rsquo;s assume that the stubs of <em>service3</em> and <em>service4</em> got already deployed to some Maven repository.</p>

<p>If I&rsquo;m writing integration tests of <em>service2</em> I&rsquo;ll for sure have some points of interaction with <em>service3</em> and <em>service4</em>. Most likely in the majority of cases I&rsquo;ll just mock those interactions in my code but it would be valuable to have a real HTTP call done to the other application. Of course I don&rsquo;t want to download both services and run them only for integration tests - that would be an overkill. That&rsquo;s why the most preferable solution at this point would be to run the stubs of my collaborators.</p>

<p>Since I&rsquo;m too lazy to do things manually I&rsquo;d prefer the stubs to be automatically downloaded for me, the WireMock servers started and fed with the stub definitions.</p>

<p>And that&rsquo;s exactly what <em>Stub Runner</em> can do for you!</p>

<h2>How does it work?</h2>

<h3>Concept</h3>

<p><a href="https://github.com/Codearte/accurest/wiki/8.-Stub-Runner">Stub Runner</a> at its core is using Groovy&rsquo;s Grape mechanism to download the stubs from a given Maven repository. Next it unpacks them to a temporary folder. Let&rsquo;s assume that you have the following structure of your WireMock stubs inside the stub JAR (example for a <code>service3-stubs.jar</code>)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>├── META-INF
</span><span class='line'>│   └── MANIFEST.MF
</span><span class='line'>└── mappings
</span><span class='line'>    └── service3
</span><span class='line'>        ├── shouldMarkClientAsFraud.json
</span><span class='line'>        ├── notAWireMockMapping.json
</span><span class='line'>        └── shouldSayHello.json</span></code></pre></td></tr></table></div></figure>


<p><em>Stub Runner</em> will scan the whole unpacked JAR for any <code>.json</code> files. There is a convention that stub definitions are placed under the <code>mappings</code> folder. So it will pick <code>shouldMarkClientAsFraud.json</code>, <code>notAWireMockMapping.json</code> and <code>shouldSayHello.json</code> files.</p>

<p>Next, a WireMock instance is started for each dependency and every found JSON is attempted to be parsed as a WireMock stub definition. Any exceptions at this point are ignored (so assuming that <code>notAWireMockMapping.json</code> is not a valid WireMock definition, the exception will be suppressed). In our scenario 2 WireMock servers will be started - one for <code>service3</code> and one for <code>service4</code>.</p>

<p>That way you don&rsquo;t have to copy the stubs manually. The stubs are centralized since they are stored in a Maven repository. It&rsquo;s extremely important cause <em>Stub Runner</em> downloads always the newest version of the stubs so you can be sure that your tests will break the moment someone does an incompatible change.</p>

<h3>API</h3>

<p>From the developer&rsquo;s perspective there are only a handful of <em>Stub Runner&rsquo;s</em> classes that should be used. In the majority of cases you will use the following ones:</p>

<h4>StubFinder</h4>

<p>An interface that allows you to find the URL of the started WireMock instance. You can find that URL by
passing the Ivy notation (<code>groupId:artifactId</code>) or just the <code>artifactId</code> - <em>Stub Runner</em> will try to take care of the rest.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="kd">interface</span> <span class="nc">StubFinder</span> <span class="o">{</span>
</span><span class='line'>  <span class="cm">/**</span>
</span><span class='line'><span class="cm">   * For the given groupId and artifactId tries to find the matching</span>
</span><span class='line'><span class="cm">   * URL of the running stub.</span>
</span><span class='line'><span class="cm">   *</span>
</span><span class='line'><span class="cm">   * @param groupId - might be null. In that case a search only via artifactId takes place</span>
</span><span class='line'><span class="cm">   * @return URL of a running stub or null if not found</span>
</span><span class='line'><span class="cm">   */</span>
</span><span class='line'>  <span class="n">URL</span> <span class="nf">findStubUrl</span><span class="o">(</span><span class="n">String</span> <span class="n">groupId</span><span class="o">,</span> <span class="n">String</span> <span class="n">artifactId</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/**</span>
</span><span class='line'><span class="cm">   * For the given Ivy notation {@code groupId:artifactId} tries to find the matching</span>
</span><span class='line'><span class="cm">   * URL of the running stub. You can also pass only {@code artifactId}.</span>
</span><span class='line'><span class="cm">   *</span>
</span><span class='line'><span class="cm">   * @param ivyNotation - Ivy representation of the Maven artifact</span>
</span><span class='line'><span class="cm">   * @return URL of a running stub or null if not found</span>
</span><span class='line'><span class="cm">   */</span>
</span><span class='line'>  <span class="n">URL</span> <span class="nf">findStubUrl</span><span class="o">(</span><span class="n">String</span> <span class="n">ivyNotation</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/**</span>
</span><span class='line'><span class="cm">   * Returns all running stubs</span>
</span><span class='line'><span class="cm">   */</span>
</span><span class='line'>  <span class="n">RunningStubs</span> <span class="nf">findAllRunningStubs</span><span class="o">()</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>RunningStubs</h4>

<p>A structure representing the already running stubs. Give you some helper methods to retrieve Ivy representation of a particular stub, find a port for a stub etc.</p>

<p><img src="/images/accurest/stubrunner/running_stubs.png" alt="RunningStubs" /></p>

<h4>StubRunning</h4>

<p>A contract for classes that can run the stubs:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="kd">interface</span> <span class="nc">StubRunning</span> <span class="kd">extends</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">StubFinder</span> <span class="o">{</span>
</span><span class='line'>  <span class="cm">/**</span>
</span><span class='line'><span class="cm">   * Runs the stubs and returns the {@link RunningStubs}</span>
</span><span class='line'><span class="cm">   */</span>
</span><span class='line'>  <span class="n">RunningStubs</span> <span class="nf">runStubs</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>StubRunner</h4>

<p>Represents a single instance of ready-to-run stubs. It can run the stubs and will return the running instance of WireMock wrapped in <code>RunningStubs</code> class. Since it&rsquo;s implementing <code>StubFinder</code> can also be queried if the current groupid and artifactid are matching the corresponding running stub.</p>

<h4>BatchStubRunner</h4>

<p>If you have multiple services for which you want to run the WireMocks with stubs it&rsquo;s enough to use <code>BatchStubRunner</code>. It iterates over the given <code>Iterable</code> of <code>StubRunner</code> and executes the logic on each of them.</p>

<h2>Running Stub Runner</h2>

<p>In all the examples below let&rsquo;s assume that the stubs are stored in the Maven repository available under <code>http://toomuchcoding.com</code> URL. As <em>service2</em> I&rsquo;d like to download the stubs of <code>com.toomuchcoding:service3</code> and
<code>com.toomuchcoding:service4</code> services.</p>

<h3>Stub Runner as a fat JAR</h3>

<h4>How to use it?</h4>

<p><em>Stub Runner</em> comes with a main class (<code>io.codearte.accurest.stubrunner.StubRunnerMain</code>) which you can run with the following options:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'> <span class="o">-</span><span class="n">maxp</span> <span class="o">(--</span><span class="n">maxPort</span><span class="o">)</span> <span class="n">N</span>            <span class="o">:</span> <span class="n">Maximum</span> <span class="n">port</span> <span class="n">value</span> <span class="n">to</span> <span class="n">be</span> <span class="n">assigned</span> <span class="n">to</span> <span class="n">the</span>
</span><span class='line'>                                  <span class="n">Wiremock</span> <span class="n">instance</span><span class="o">.</span> <span class="n">Defaults</span> <span class="n">to</span> <span class="mi">15000</span>
</span><span class='line'>                                  <span class="o">(</span><span class="k">default</span><span class="o">:</span> <span class="mi">15000</span><span class="o">)</span>
</span><span class='line'> <span class="o">-</span><span class="n">minp</span> <span class="o">(--</span><span class="n">minPort</span><span class="o">)</span> <span class="n">N</span>            <span class="o">:</span> <span class="n">Minimal</span> <span class="n">port</span> <span class="n">value</span> <span class="n">to</span> <span class="n">be</span> <span class="n">assigned</span> <span class="n">to</span> <span class="n">the</span>
</span><span class='line'>                                  <span class="n">Wiremock</span> <span class="n">instance</span><span class="o">.</span> <span class="n">Defaults</span> <span class="n">to</span> <span class="mi">10000</span>
</span><span class='line'>                                  <span class="o">(</span><span class="k">default</span><span class="o">:</span> <span class="mi">10000</span><span class="o">)</span>
</span><span class='line'> <span class="o">-</span><span class="n">s</span> <span class="o">(--</span><span class="n">stubs</span><span class="o">)</span> <span class="n">VAL</span>               <span class="o">:</span> <span class="n">Comma</span> <span class="n">separated</span> <span class="n">list</span> <span class="n">of</span> <span class="n">Ivy</span> <span class="n">representation</span> <span class="n">of</span>
</span><span class='line'>                                  <span class="n">jars</span> <span class="n">with</span> <span class="n">stubs</span><span class="o">.</span> <span class="n">Eg</span><span class="o">.</span> <span class="nl">groupid:</span><span class="n">artifactid1</span><span class="o">,</span><span class="n">group</span>
</span><span class='line'>                                  <span class="nl">id2:artifactid2:</span><span class="n">classifier</span>
</span><span class='line'> <span class="o">-</span><span class="n">sr</span> <span class="o">(--</span><span class="n">stubRepositoryRoot</span><span class="o">)</span> <span class="n">VAL</span> <span class="o">:</span> <span class="n">Location</span> <span class="n">of</span> <span class="n">a</span> <span class="n">Jar</span> <span class="n">containing</span> <span class="n">server</span> <span class="n">where</span> <span class="n">you</span>
</span><span class='line'>                                  <span class="n">keep</span> <span class="n">your</span> <span class="nf">stubs</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">g</span><span class="o">.</span> <span class="nl">http:</span><span class="c1">//nexus.net/content</span>
</span><span class='line'>                                  <span class="s">/repositories/</span><span class="n">repository</span><span class="o">)</span>
</span><span class='line'> <span class="o">-</span><span class="n">ss</span> <span class="o">(--</span><span class="n">stubsSuffix</span><span class="o">)</span> <span class="n">VAL</span>        <span class="o">:</span> <span class="n">Suffix</span> <span class="k">for</span> <span class="n">the</span> <span class="n">jar</span> <span class="n">containing</span> <span class="n">stubs</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">g</span><span class="o">.</span>
</span><span class='line'>                                  <span class="s1">&#39;stubs&#39;</span> <span class="k">if</span> <span class="n">the</span> <span class="n">stub</span> <span class="n">jar</span> <span class="n">would</span> <span class="n">have</span> <span class="n">a</span> <span class="s1">&#39;stubs&#39;</span>
</span><span class='line'>                                  <span class="n">classifier</span> <span class="k">for</span> <span class="nl">stubs:</span> <span class="n">foobar</span><span class="o">-</span><span class="n">stubs</span> <span class="o">).</span>
</span><span class='line'>                                  <span class="n">Defaults</span> <span class="n">to</span> <span class="s1">&#39;stubs&#39;</span> <span class="o">(</span><span class="k">default</span><span class="o">:</span> <span class="n">stubs</span><span class="o">)</span>
</span><span class='line'> <span class="o">-</span><span class="n">wo</span> <span class="o">(--</span><span class="n">workOffline</span><span class="o">)</span>            <span class="o">:</span> <span class="n">Switch</span> <span class="n">to</span> <span class="n">work</span> <span class="n">offline</span><span class="o">.</span> <span class="n">Defaults</span> <span class="n">to</span> <span class="s1">&#39;false&#39;</span>
</span><span class='line'>                                  <span class="o">(</span><span class="k">default</span><span class="o">:</span> <span class="kc">false</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can run that main class from IDE or build yourself a fat JAR. To do that just call the following command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="o">./</span><span class="n">gradlew</span> <span class="n">stub</span><span class="o">-</span><span class="n">runner</span><span class="o">-</span><span class="nl">root:</span><span class="n">stub</span><span class="o">-</span><span class="nl">runner:</span><span class="n">shadowJar</span> <span class="o">-</span><span class="n">PfatJar</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then inside the <code>build/lib</code> there will be a fat JAR with classifier <code>fatJar</code> waiting for you to execute.</p>

<p>Coming back to our example once the fat JAR is built I would just call the following command the retrieve the stubs of <em>service3</em> and <em>service4</em> from the Maven repository available at <code>http://toomuchcoding.com</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="n">stub</span><span class="o">-</span><span class="n">runner</span><span class="o">-</span><span class="mf">1.0</span><span class="o">.</span><span class="mi">4</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">-</span><span class="n">fatJar</span><span class="o">.</span><span class="na">jar</span> <span class="o">-</span><span class="n">sr</span> <span class="nl">http:</span><span class="c1">//toomuchcoding.com -s com.toomuchcoding:service3:stubs,com.toomuchcoding.service4</span>
</span></code></pre></td></tr></table></div></figure>


<h4>When to use it?</h4>

<p>Running <em>Stub Runner</em> as a main class makes most sense when you&rsquo;re running some fast smoke tests on a deployed application where you don&rsquo;t want to download and run all the collaborators of that application. For more rationale behind such an approach you can check my article about <a href="/blog/2015/09/27/microservice-deployment/">Microservice Deployment</a></p>

<h3>Stub Runner JUnit Rule</h3>

<h4>How to use it?</h4>

<p>You can use the <em>Stub Runner&rsquo;s</em> JUnit rule to automatically download and run the stubs during your tests. The <code>AccurestRule</code> implements the <code>StubFinder</code> interface thus you can easily find the URLs of the services that you&rsquo;re interested in.</p>

<p>This is how you could do it with Spock:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="kd">class</span> <span class="nc">SomeSpec</span> <span class="kd">extends</span> <span class="n">Specification</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@ClassRule</span> <span class="nd">@Shared</span> <span class="n">AccurestRule</span> <span class="n">rule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccurestRule</span><span class="o">()</span>
</span><span class='line'>      <span class="o">.</span><span class="na">repoRoot</span><span class="o">(</span><span class="s1">&#39;http://toomuchcoding.com&#39;</span><span class="o">)</span>
</span><span class='line'>      <span class="o">.</span><span class="na">downloadStub</span><span class="o">(</span><span class="s2">&quot;com.toomuchcoding&quot;</span><span class="o">,</span> <span class="s2">&quot;service3&quot;</span><span class="o">)</span>
</span><span class='line'>      <span class="o">.</span><span class="na">downloadStub</span><span class="o">(</span><span class="s2">&quot;com.toomuchcoding:service4&quot;</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">def</span> <span class="s1">&#39;should do something useful when service3 is called&#39;</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="nl">given:</span>
</span><span class='line'>            <span class="n">URL</span> <span class="n">service3Url</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="na">findStubUrl</span><span class="o">(</span><span class="s1">&#39;com.toomuchcoding&#39;</span><span class="o">,</span> <span class="s1">&#39;service3&#39;</span><span class="o">)</span>
</span><span class='line'>        <span class="nl">expect:</span>
</span><span class='line'>            <span class="n">somethingUseful</span><span class="o">(</span><span class="n">service3Url</span><span class="o">)</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">def</span> <span class="s1">&#39;should do something even more useful when service4 is called&#39;</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="nl">given:</span>
</span><span class='line'>            <span class="n">URL</span> <span class="n">service4Url</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="na">findStubUrl</span><span class="o">(</span><span class="s1">&#39;service4&#39;</span><span class="o">)</span>
</span><span class='line'>        <span class="nl">expect:</span>
</span><span class='line'>            <span class="n">somethingMoreUseful</span><span class="o">(</span><span class="n">service4Url</span><span class="o">)</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>or with plain Java JUnit:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SomeTest</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@ClassRule</span> <span class="kd">public</span> <span class="kd">static</span> <span class="n">AccurestRule</span> <span class="n">rule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccurestRule</span><span class="o">()</span>
</span><span class='line'>      <span class="o">.</span><span class="na">repoRoot</span><span class="o">(</span><span class="s2">&quot;http://toomuchcoding.com&quot;</span><span class="o">)</span>
</span><span class='line'>      <span class="o">.</span><span class="na">downloadStub</span><span class="o">(</span><span class="s2">&quot;com.toomuchcoding&quot;</span><span class="o">,</span> <span class="s2">&quot;service3&quot;</span><span class="o">)</span>
</span><span class='line'>      <span class="o">.</span><span class="na">downloadStub</span><span class="o">(</span><span class="s2">&quot;com.toomuchcoding:service4&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Test</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">should_do_something_useful_when_service3_is_called</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">URL</span> <span class="n">service3Url</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="na">findStubUrl</span><span class="o">(</span><span class="s2">&quot;com.toomuchcoding&quot;</span><span class="o">,</span> <span class="s2">&quot;service3&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">somethingUseful</span><span class="o">(</span><span class="n">service3Url</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Test</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">should_do_something_even_more_useful_when_service4_is_called</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">URL</span> <span class="n">service4Url</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="na">findStubUrl</span><span class="o">(</span><span class="s2">&quot;service4&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">somethingMoreUseful</span><span class="o">(</span><span class="n">service4Url</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>When to use it?</h4>

<p>You can use this rule in any place you want to if we don&rsquo;t provide any integration with an existing framework.</p>

<h3>Stub Runner Spring</h3>

<h4>How to use it?</h4>

<p>You can use the <em>Stub Runner&rsquo;s</em> Spring configuration to download the stubs of your collaborators and run the WireMock server upon Spring context booting. We&rsquo;re providing the <code>StubRunnerConfiguration</code> that you can import in your tests. In that configuration we&rsquo;re registering a <code>StubFinder</code> bean that you can autowire in your tests.</p>

<p>Having the following <code>application.yaml</code> file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">stubrunner.stubs.repository.root</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://toomuchcoding.com</span>
</span><span class='line'><span class="l-Scalar-Plain">stubrunner.stubs.ids</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">com.toomuchcoding:service3:stubs,com.toomuchcoding.service4</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is how you could do it with Spock</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="n">Config</span><span class="o">,</span> <span class="n">loader</span> <span class="o">=</span> <span class="n">SpringApplicationContextLoader</span><span class="o">)</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">StubRunnerConfigurationSpec</span> <span class="kd">extends</span> <span class="n">Specification</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Autowired</span> <span class="n">StubFinder</span> <span class="n">stubFinder</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">def</span> <span class="s1">&#39;should do something useful when service3 is called&#39;</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="nl">given:</span>
</span><span class='line'>          <span class="n">URL</span> <span class="n">service3Url</span> <span class="o">=</span> <span class="n">stubFinder</span><span class="o">.</span><span class="na">findStubUrl</span><span class="o">(</span><span class="s1">&#39;com.toomuchcoding&#39;</span><span class="o">,</span> <span class="s1">&#39;service3&#39;</span><span class="o">)</span>
</span><span class='line'>      <span class="nl">expect:</span>
</span><span class='line'>          <span class="n">somethingUseful</span><span class="o">(</span><span class="n">service3Url</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">def</span> <span class="s1">&#39;should do something even more useful when service4 is called&#39;</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="nl">given:</span>
</span><span class='line'>          <span class="n">URL</span> <span class="n">service4Url</span> <span class="o">=</span> <span class="n">stubFinder</span><span class="o">.</span><span class="na">findStubUrl</span><span class="o">(</span><span class="s1">&#39;service4&#39;</span><span class="o">)</span>
</span><span class='line'>      <span class="nl">expect:</span>
</span><span class='line'>          <span class="n">somethingMoreUseful</span><span class="o">(</span><span class="n">service4Url</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Configuration</span>
</span><span class='line'>  <span class="nd">@Import</span><span class="o">(</span><span class="n">StubRunnerConfiguration</span><span class="o">)</span>
</span><span class='line'>  <span class="nd">@EnableAutoConfiguration</span>
</span><span class='line'>  <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Config</span> <span class="o">{}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>When to use it?</h4>

<p>In your tests if you have Spring and don&rsquo;t have Spring Cloud. Also you can add it in compile time (of course you would have to add some Spring profiles so as not to run it on production) to profit from a &ldquo;developer&rdquo; mode of running microservices. That means that if you boot up your application to click around it - all the stubs around you would have already been downloaded and started.</p>

<h3>Stub Runner Spring Cloud</h3>

<h4>How to use it?</h4>

<p>You can use the <em>Stub Runner&rsquo;s</em> Spring Cloud configuration to profit from the stubbed collaborators when using Spring Cloud&rsquo;s abstractions over service discovery and when you&rsquo;re using Netflix Ribbon. <em>Stub Runner Spring Cloud</em> configuration is an <code>AutoConfiguration</code> so it&rsquo;s automatically started for you.</p>

<p>Let&rsquo;s assume that you&rsquo;re referring to <em>service3</em> as <code>service3</code> in your code and to <em>service4</em> as <code>shouldMapThisNameToService4</code>. That means that you&rsquo;re using for example the <code>@LoadBalanced</code> <code>RestTemplate</code> in the following way (don&rsquo;t use field injection as I do in this example!!):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="nd">@Component</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">SomeClass</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Autowired</span> <span class="nd">@LoadBalanced</span> <span class="n">RestTemplate</span> <span class="n">restTemplate</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">doSth</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">// code...</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">service3Response</span> <span class="o">=</span> <span class="n">restTemplate</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span><span class="s1">&#39;http://service3/name&#39;</span><span class="o">,</span> <span class="n">String</span><span class="o">)</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">service4Response</span> <span class="o">=</span> <span class="n">restTemplate</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span><span class="s1">&#39;http://shouldMapThisNameToService4/name&#39;</span><span class="o">,</span> <span class="n">String</span><span class="o">)</span>
</span><span class='line'>    <span class="c1">// more code...</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the service Id that you&rsquo;re using to call other services maps exactly to the name of the artifact Id in a Maven repository then you&rsquo;re lucky and don&rsquo;t have to do anything to find your running stubs. If however that&rsquo;s not the case - don&rsquo;t worry, you&rsquo;ll just have to map it yourself.</p>

<p>The <code>stubrunner.stubs.idsToServiceIds</code> property is the root path to a map in which the <em>key</em> is the <em>artifactID</em> of the downloaded stub and the <em>value</em> is the <em>serviceId</em> used in the code.</p>

<p>Having the following <code>application.yaml</code> file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">stubrunner.stubs.repository.root</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://toomuchcoding.com</span>
</span><span class='line'><span class="l-Scalar-Plain">stubrunner.stubs.ids</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">com.toomuchcoding:service3:stubs,com.toomuchcoding.service4</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">stubrunner.stubs.idsToServiceIds</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">service4</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">shouldMapThisNameToService4</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is how you could do it with Spock</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="n">Config</span><span class="o">,</span> <span class="n">loader</span> <span class="o">=</span> <span class="n">SpringApplicationContextLoader</span><span class="o">)</span>
</span><span class='line'><span class="kd">class</span> <span class="nc">StubRunnerConfigurationSpec</span> <span class="kd">extends</span> <span class="n">Specification</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Autowired</span> <span class="n">SomeClass</span> <span class="n">someClass</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">def</span> <span class="s1">&#39;should not explode&#39;</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="nl">when:</span>
</span><span class='line'>          <span class="n">someClass</span><span class="o">.</span><span class="na">doSth</span><span class="o">()</span>
</span><span class='line'>      <span class="nl">expect:</span>
</span><span class='line'>          <span class="n">noExceptionThrown</span><span class="o">()</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Configuration</span>
</span><span class='line'>  <span class="nd">@EnableAutoConfiguration</span>
</span><span class='line'>  <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Config</span> <span class="o">{}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>When to use it?</h4>

<p>When you&rsquo;re using Spring Cloud. You can profit from <code>Stub Runner Spring Cloud</code> also in &ldquo;developer&rdquo; mode as presented in the <code>Stub Runner Spring</code> section.</p>

<h3>Additional Configuration Options</h3>

<p>You can set the default value of the Maven repository by means of a system property:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="o">-</span><span class="n">Dstubrunner</span><span class="o">.</span><span class="na">stubs</span><span class="o">.</span><span class="na">repository</span><span class="o">.</span><span class="na">root</span><span class="o">=</span><span class="nl">http:</span><span class="c1">//your.maven.repo.com</span>
</span></code></pre></td></tr></table></div></figure>


<p>The list of configurable properties contains:</p>

<table>
<thead>
<tr>
<th> Name </th>
<th> Default value </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> stubrunner.port.range.min </td>
<td> 10000 </td>
<td> Minimal value of a port for a WireMock server </td>
</tr>
<tr>
<td> stubrunner.port.range.max </td>
<td> 15000 </td>
<td> Maximum value of a port for a WireMock server </td>
</tr>
<tr>
<td> stubrunner.stubs.repository.root </td>
<td>  </td>
<td> Address to your M2 repo (will point to local M2 repo if none is provided) </td>
</tr>
<tr>
<td> stubrunner.stubs.classifier </td>
<td> stubs </td>
<td> Default classifier for the JARs containing stubs </td>
</tr>
<tr>
<td> stubrunner.work-offline </td>
<td> false </td>
<td> Should try to connect to any repo to download stubs (useful if there&rsquo;s no internet) </td>
</tr>
<tr>
<td> stubrunner.stubs </td>
<td> </td>
<td> Default comma separated list of stubs to download </td>
</tr>
</tbody>
</table>


<h2>Summary</h2>

<p><em>Stub Runner</em>:</p>

<ul>
<li>Has already proven to be a very useful tool when doing CDC.</li>
<li>Was battle tested and more companies are declaring their interest in using it.</li>
<li>Helps you produce an API that should make both sides (server and the client) equally happy (or unhappy but still they&rsquo;re both equal in their emotions ;) ).</li>
<li>Is language / technology agnostic - you can run it as a fat JAR, use it with Spring, Guice or whatever you want.</li>
<li>Helps you speed up the feedback cycle both from the API design and the compatibility perspective.</li>
</ul>


<h2>Links</h2>

<ul>
<li><a href="https://github.com/Codearte/accurest">AccuREST Github Repository</a></li>
<li><a href="https://github.com/Codearte/accurest/wiki/8.-Stub-Runner">Stub Runner WIKI</a></li>
<li><a href="https://gitter.im/Codearte/accurest">AccuREST Gitter</a></li>
<li><a href="https://github.com/Codearte/accurest-maven-plugin">AccuREST Maven Plugin</a></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Marcin Grzejszczak</span></span>

      








  


<time datetime="2016-04-06T11:05:58+02:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/accurest/'>accurest</a>, <a class='category' href='/blog/categories/stubrunner/'>stubrunner</a>, <a class='category' href='/blog/categories/testing/'>testing</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://toomuchcoding.com/blog/2016/04/06/accurest-stubrunner-released/" data-via="mgrzejszczak" data-counturl="http://toomuchcoding.com/blog/2016/04/06/accurest-stubrunner-released/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/03/27/json-assert-0-dot-3-0-released/" title="Previous Post: JSON Assert 0.3.0 released">&laquo; JSON Assert 0.3.0 released</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/04/11/uptodate-gradle-plugin-migrated/" title="Next Post: UpToDate Gradle Plugin migrated">UpToDate Gradle Plugin migrated &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p><img src="/images/ja.jpg" style="float:left;margin:5px;border-width:0px"/>Enthusiast of clean coding and good design. Author of "Mockito Instant" and "Mockito Cookbook" books. Contributor to several open source projects (including Rest-assured, Drools, Moco, Mockito). Co-author of the Groovy @Builder, "micro-infra-spring", "spring-cloud-zookeeper", "spring-cloud-sleuth" microservices related open source solutions. Author of Uptodate Gradle plugin, Spock subjects-collaborators extension and gradle-test-profiler open source projects. Co-founder of the Warsaw Groovy User Group. A member of the Most Valuable Blogger program at DZone and Java Code Geeks. Interested in working with JVM languages, XP-driven projects with continuous deployment and most preferably microservice architecture.</p>

  <p>Currently hacking <a href="https://github.com/spring-cloud/">Spring Cloud</a> at <a href="http://spring.io">Pivotal</a></p>

  <p>Co-organizer of the <a href="http://warsaw.gr8days.pl">Warsaw GR8 Day Conference</a></p>

  <p>Homepage:</p>
  <p><a href="http://marcin.grzejszczak.pl">http://marcin.grzejszczak.pl</a></p>

  <p>Github profile</p>
  <p><a href="https://github.com/marcingrzejszczak">https://github.com/marcingrzejszczak</a></p>

  <p>Lanyrd profile</p>
  <p><a href="http://lanyrd.com/profile/marcin-grzejszczak">http://lanyrd.com/profile/marcin-grzejszczak</a></p>

  <p>Twitter profile</p>
  <p><a href="https://twitter.com/MGrzejszczak">@MGrzejszczak</a></p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/07/25/spring-cloud-contract-1-dot-0-0-dot-m1-released/">Spring Cloud Contract 1.0.0.M1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/06/24/accurest-becomes-part-of-the-spring-cloud-contract/">Accurest becomes part of the Spring Cloud Contract</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/31/zero-downtime-deployment-with-a-database/">Zero Downtime Deployment with a Database</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/04/30/accurest-and-stub-runner-1-dot-1-0-dot-m3/">Accurest and Stub Runner 1.1.0.M3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/04/25/accurest-docs-updated/">Accurest docs updated</a>
      </li>
    
  </ul>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/108408840893580782990?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Marcin Grzejszczak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'toomuchcoding';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://toomuchcoding.com/blog/2016/04/06/accurest-stubrunner-released/';
        var disqus_url = 'http://toomuchcoding.com/blog/2016/04/06/accurest-stubrunner-released/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
