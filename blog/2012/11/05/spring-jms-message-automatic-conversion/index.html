
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Spring JMS, message automatic conversion, JMS template - TOO MUCH CODING</title>
  <meta name="author" content="Marcin Grzejszczak">

  
  <meta name="description" content="Hi!In one of my projects I was supposed to create a message router that like all routers was supposed to take the JMS messages from one topic and &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://toomuchcoding.com/blog/2012/11/05/spring-jms-message-automatic-conversion/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="TOO MUCH CODING" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-74671877-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">TOO MUCH CODING</a></h1>
  
    <h2>A blog for coding addicts by Marcin Grzejszczak</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:toomuchcoding.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Spring JMS, Message Automatic Conversion, JMS Template</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-05T02:29:00+01:00" pubdate data-updated="true"></time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><div class='post'>
<br /><br />Hi!<br /><br />In one of my projects I was supposed to create a message router that like all routers was supposed to take the JMS messages from one topic and put it into another one. The message itself was a JMS text message that in fact contained an XML message. What is more after having received it I was supposed to enrich the message with some additional data.<br />
<!--more-->
<br />We were not allowed to use neither Spring nor JAXB nor any other useful library so I decided to check how easy it would be to do it using them. Initially I wanted to use only Spring and JAXB but in the next post I will try to repeat the same scenario by using Apache Camel (that's why you will find the word "camel" in the package name). The JMS communication was present thanks to the ActiveMQ messaging server.<br /><br />Anyway coming back to the code.<br /><br />I used maven to resolve dependencies and these are the dependencies that were mandatory i n terms of JMS and JAXB and message conversion:<br /><br /><b>pom.xml</b><br /><br /><pre class="brush:xml">  &lt;dependency&gt;<br />   &lt;groupId&gt;org.springframework&lt;/groupId&gt;<br />   &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;<br />   &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;<br />  &lt;/dependency&gt;<br />  &lt;dependency&gt;<br />   &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;<br />   &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;<br />   &lt;version&gt;2.2.6&lt;/version&gt;<br />  &lt;/dependency&gt;<br />  &lt;dependency&gt;<br />   &lt;groupId&gt;org.springframework&lt;/groupId&gt;<br />   &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;<br />   &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;<br />  &lt;/dependency&gt;<br /></pre><br /><br />This is how I divided the project (the camel part of the package will make more sense in the next article).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-iNFJ6Htvx0Q/UJgnuxzQ2hI/AAAAAAAAAIQ/nBmCjDUaKfc/s1600/JMS.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://2.bp.blogspot.com/-iNFJ6Htvx0Q/UJgnuxzQ2hI/AAAAAAAAAIQ/nBmCjDUaKfc/s320/JMS.png" width="195" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><br />In order to have my message converted to objects via JAXB I needed a schema:<br /><br /><b>Player.xsd</b><br /><br /><pre class="brush:xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;<br /><br /> &lt;xsd:element name="PlayerDetails"&gt;<br />  &lt;xsd:complexType&gt;<br />   &lt;xsd:sequence&gt;<br />    &lt;xsd:element name="Name" type="xsd:string" /&gt;<br />    &lt;xsd:element name="Surname" type="xsd:string" /&gt;<br />    &lt;xsd:element name="Position" type="PositionType" /&gt;<br />    &lt;xsd:element name="Age" type="xsd:int" /&gt;<br />    &lt;xsd:element name="TeamName" type="xsd:string" /&gt;<br />   &lt;/xsd:sequence&gt;<br />  &lt;/xsd:complexType&gt;<br /> &lt;/xsd:element&gt;<br /><br /><br /> &lt;xsd:simpleType name="PositionType"&gt;<br />  &lt;xsd:restriction base="xsd:string"&gt;<br />   &lt;xsd:enumeration value="GK" /&gt;<br />   &lt;xsd:enumeration value="DEF" /&gt;<br />   &lt;xsd:enumeration value="MID" /&gt;<br />   &lt;xsd:enumeration value="ATT" /&gt;<br />  &lt;/xsd:restriction&gt;<br /> &lt;/xsd:simpleType&gt;<br /><br />&lt;/xsd:schema&gt;<br /></pre><br />I had to download JAXB binaries and executed the following command to have my objects created:<br /><br /><pre class="brush:xml">./xjc.sh -p pl.grzejszczak.marcin.camel.jaxb.generated ~/PATH/TO/THE/SCHEMA/FILE/Player.xsd</pre><br /><b style="text-decoration: underline;">Note: </b>The same you can achieve by using maven. This approach is not in the blog's repository but believe me - it does work :D<br /><br />Add dependency to pom<br /><br /><pre class="brush:xml">&lt;dependency&gt;<br />    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;<br />&nbsp; &nbsp; &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;<br />&nbsp; &nbsp; &lt;version&gt;2.1&lt;/version&gt;<br />&lt;/dependency&gt;</pre><br /><br />Use the plugin (mind that the schema file needs to be specified or by default is searched for at <span style="font-family: Courier New, Courier, monospace;">src/main/xsd/</span> folder)<br /><br /><br /><pre class="brush:xml">&lt;build&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;pluginManagement&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;plugins&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;plugin&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;version&gt;2.5.1&lt;/version&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/plugin&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/plugins&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/pluginManagement&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;plugins&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;plugin&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;version&gt;1.5&lt;/version&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;executions&gt;<br />  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;execution&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;id&gt;xjc&lt;/id&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;goals&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;goal&gt;xjc&lt;/goal&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/goals&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/execution&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/executions&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;configuration&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;packageName&gt;pl.grzejszczak.marcin.camel.jaxb.generated&lt;/packageName&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/configuration&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/plugin&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/plugins&gt;<br />&nbsp; &nbsp; &lt;/build&gt;</pre><br />An example of the outcome of this command or maven plugin is the following:<br /><br /><b>PlayerDetails.java</b><br /><br /><pre class="brush:java">//<br />// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, v2.2.6 <br />// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> <br />// Any modifications to this file will be lost upon recompilation of the source schema. <br />// Generated on: 2012.11.05 at 09:23:22 PM CET <br />//<br /><br /><br />package pl.grzejszczak.marcin.camel.jaxb.generated;<br /><br />import javax.xml.bind.annotation.XmlAccessType;<br />import javax.xml.bind.annotation.XmlAccessorType;<br />import javax.xml.bind.annotation.XmlElement;<br />import javax.xml.bind.annotation.XmlRootElement;<br />import javax.xml.bind.annotation.XmlType;<br /><br /><br />/**<br /> * Java class for anonymous complex type.<br /> * <br /> * <br /><br />The following schema fragment specifies the expected content contained within this class.<br /> * <br /> * <br /><br /><pre> * &lt;complexType&gt;<br /> *   &lt;complexContent&gt;<br /> *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType"&gt;<br /> *       &lt;sequence&gt;<br /> *         &lt;element name="Name" type="{http://www.w3.org/2001/XMLSchema}string"/&gt;<br /> *         &lt;element name="Surname" type="{http://www.w3.org/2001/XMLSchema}string"/&gt;<br /> *         &lt;element name="Position" type="{}PositionType"/&gt;<br /> *         &lt;element name="Age" type="{http://www.w3.org/2001/XMLSchema}int"/&gt;<br /> *         &lt;element name="TeamName" type="{http://www.w3.org/2001/XMLSchema}string"/&gt;<br /> *       &lt;/sequence&gt;<br /> *     &lt;/restriction&gt;<br /> *   &lt;/complexContent&gt;<br /> * &lt;/complexType&gt;<br /> * </pre>*   *   */ @XmlAccessorType(XmlAccessType.FIELD) @XmlType(name = "", propOrder = {     "name",     "surname",     "position",     "age",     "teamName" }) @XmlRootElement(name = "PlayerDetails") public class PlayerDetails {      @XmlElement(name = "Name", required = true)     protected String name;     @XmlElement(name = "Surname", required = true)     protected String surname;     @XmlElement(name = "Position", required = true)     protected PositionType position;     @XmlElement(name = "Age")     protected int age;     @XmlElement(name = "TeamName", required = true)     protected String teamName;      /**      * Gets the value of the name property.      *       * @return      *     possible object is      *     {@link String }      *           */     public String getName() {         return name;     }      /**      * Sets the value of the name property.      *       * @param value      *     allowed object is      *     {@link String }      *           */     public void setName(String value) {         this.name = value;     }      /**      * Gets the value of the surname property.      *       * @return      *     possible object is      *     {@link String }      *           */     public String getSurname() {         return surname;     }      /**      * Sets the value of the surname property.      *       * @param value      *     allowed object is      *     {@link String }      *           */     public void setSurname(String value) {         this.surname = value;     }      /**      * Gets the value of the position property.      *       * @return      *     possible object is      *     {@link PositionType }      *           */     public PositionType getPosition() {         return position;     }      /**      * Sets the value of the position property.      *       * @param value      *     allowed object is      *     {@link PositionType }      *           */     public void setPosition(PositionType value) {         this.position = value;     }      /**      * Gets the value of the age property.      *       */     public int getAge() {         return age;     }      /**      * Sets the value of the age property.      *       */     public void setAge(int value) {         this.age = value;     }      /**      * Gets the value of the teamName property.      *       * @return      *     possible object is      *     {@link String }      *           */     public String getTeamName() {         return teamName;     }      /**      * Sets the value of the teamName property.      *       * @param value      *     allowed object is      *     {@link String }      *           */     public void setTeamName(String value) {         this.teamName = value;     }  }   </pre>The <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">@XmlRootElement(name = "PlayerDetails")</span> means that this class will output a Root node in the XML file. The <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">@XmlAccessorType(XmlAccessType.FIELD)</span> as the JavaDoc says means that  <i>"Every non static, non transient field in a JAXB-bound class will be automatically bound to XML, unless annotated by XmlTransient."</i> In other words, if you have a field annotated by the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">XmlTransient</span> annotation it won't get serialized. Then we have the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">@XmlType(name = "", propOrder = { "name", "surname", "position", "age", "teamName" })</span>which as JavaDoc sates <i>"</i><span class="Apple-style-span" style="background-color: white;"><i>Maps a class or an enum type to a XML Schema type</i></span><i>"</i>&nbsp;. In other words our class is mapped to the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">PlayerDetails</span>&nbsp;element in the schema. Finally we have the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">@XmlElement(name = "Name", required = true)</span> annotation which is a mapping of the XML node (element) to a field in the class.<br /><br />This is my message to be sent, received, enriched and routed:<br /><br /><b>RobertLewandowski.xml</b><br /><br /><pre class="brush:xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;<br />&lt;PlayerDetails&gt;<br />    &lt;Name&gt;Robert&lt;/Name&gt;<br />    &lt;Surname&gt;Lewandowski&lt;/Surname&gt;<br />    &lt;Position&gt;ATT&lt;/Position&gt;<br />&lt;/PlayerDetails&gt;<br /></pre><br />Now off to my JMS configuration - I have configured the Queues of origin and destination<br /><br /><b>jms.properties</b><br /><br /><pre class="brush:xml">jms.origin=Initial.Queue<br />jms.destination=Routed.Queue<br /></pre><br />This is my Spring configuration (I added comments inside the config that explain the origin of those components):<br /><br /><b>jmsApplicationContext.xml</b><br /><br /><pre class="brush:xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;beans xmlns="http://www.springframework.org/schema/beans"<br /> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"<br /> xmlns:jms="http://www.springframework.org/schema/jms" xmlns:oxm="http://www.springframework.org/schema/oxm"<br /> xsi:schemaLocation="http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms-3.0.xsd http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd"&gt;<br /><br /> &lt;!-- Spring configuration based on annotations --&gt;<br /> &lt;context:annotation-config /&gt;<br /> &lt;!-- Show Spring where to search for the beans (in which packages) --&gt;<br /> &lt;context:component-scan base-package="pl.grzejszczak.marcin.camel" /&gt;<br /> <br /> &lt;!-- Show Spring where to search for the properties files --&gt;<br /> &lt;context:property-placeholder location="classpath:/camel/jms.properties" /&gt;<br /><br /> &lt;!-- The ActiveMQ connection factory with specification of the server URL --&gt;<br /> &lt;bean id="activeMQConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory"&gt;<br />  &lt;property name="brokerURL" value="tcp://localhost:61616" /&gt;<br /> &lt;/bean&gt;<br /><br /> &lt;!-- Spring's jms connection factory --&gt;<br /> &lt;bean id="cachingConnectionFactory"<br />  class="org.springframework.jms.connection.CachingConnectionFactory"&gt;<br />  &lt;property name="targetConnectionFactory" ref="activeMQConnectionFactory" /&gt;<br />  &lt;property name="sessionCacheSize" value="10" /&gt;<br /> &lt;/bean&gt;<br /><br /> &lt;!-- The name of the queue from which we will take the messages --&gt;<br /> &lt;bean id="origin" class="org.apache.activemq.command.ActiveMQQueue"&gt;<br />  &lt;constructor-arg value="${jms.origin}" /&gt;<br /> &lt;/bean&gt;<br /> &lt;!-- The name of the queue to which we will route the messages --&gt;<br /> &lt;bean id="destination" class="org.apache.activemq.command.ActiveMQQueue"&gt;<br />  &lt;constructor-arg value="${jms.destination}" /&gt;<br /> &lt;/bean&gt;<br /><br /> &lt;!-- Configuration of the JmsTemplate together with the connection factory and the message converter --&gt;<br /> &lt;bean id="producerTemplate" class="org.springframework.jms.core.JmsTemplate"&gt;<br />  &lt;property name="connectionFactory" ref="cachingConnectionFactory" /&gt;<br />  &lt;property name="messageConverter" ref="oxmMessageConverter" /&gt;<br /> &lt;/bean&gt;<br /><br /> &lt;!-- Custom message sender sending messages to the initial queue --&gt;<br /> &lt;bean id="originPlayerSender" class="pl.grzejszczak.marcin.camel.manual.jms.PlayerDetailsSenderImpl"&gt;<br />  &lt;property name="destination" ref="origin" /&gt;<br /> &lt;/bean&gt;<br /> &lt;!-- Custom message sender sending messages to the destination queue --&gt;<br /> &lt;bean id="destinationPlayerSender" class="pl.grzejszczak.marcin.camel.manual.jms.PlayerDetailsSenderImpl"&gt;<br />  &lt;property name="destination" ref="destination" /&gt;<br /> &lt;/bean&gt;<br /><br /> &lt;!-- Custom message listener - listens to the initial queue  --&gt;<br /> &lt;bean id="originListenerImpl" class="pl.grzejszczak.marcin.camel.manual.jms.ListenerImpl"/&gt;<br /> &lt;!-- Custom message listener - listens to the destination queue  --&gt;<br /> &lt;bean id="destinationListenerImpl" class="pl.grzejszczak.marcin.camel.manual.jms.FinalListenerImpl"/&gt;<br /><br /> &lt;!-- Spring's jms message listener container - specified the connection factory, the queue to be listened to and the component that listens to the queue --&gt;<br /> &lt;bean id="jmsOriginContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer"&gt;<br />  &lt;property name="connectionFactory" ref="cachingConnectionFactory" /&gt;<br />  &lt;property name="destination" ref="origin" /&gt;<br />  &lt;property name="messageListener" ref="originListenerImpl" /&gt;<br /> &lt;/bean&gt;<br /> <br /> &lt;!-- Spring's jms message listener container - specified the connection factory, the queue to be listened to and the component that listens to the queue --&gt;<br /> &lt;bean id="jmsDestinationContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer"&gt;<br />  &lt;property name="connectionFactory" ref="cachingConnectionFactory" /&gt;<br />  &lt;property name="destination" ref="destination" /&gt;<br />  &lt;property name="messageListener" ref="destinationListenerImpl" /&gt;<br /> &lt;/bean&gt;<br /> <br /> &lt;!-- Message converter - automatically marshalls and unmarshalls messages using the provided marshaller / unmarshaller--&gt;<br /> &lt;bean id="oxmMessageConverter" class="org.springframework.jms.support.converter.MarshallingMessageConverter"&gt;<br />          &lt;property name="marshaller" ref="marshaller" /&gt;<br />          &lt;property name="unmarshaller" ref="marshaller" /&gt;<br />     &lt;/bean&gt;<br /><br /> &lt;!-- Spring's JAXB implementation of marshaller - provided a class the JAXB generated class --&gt;<br />     &lt;oxm:jaxb2-marshaller id="marshaller"&gt;<br />          &lt;oxm:class-to-be-bound name="pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails" /&gt;<br />     &lt;/oxm:jaxb2-marshaller&gt;<br /><br />&lt;/beans&gt;<br /><br /></pre>Now let's take a look at the Java code - let's start with the class that has the main function<br /><br /><b>ActiveMQRouter.java</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin.camel.manual;<br /><br />import java.io.File;<br />import java.util.Scanner;<br /><br />import javax.jms.JMSException;<br /><br />import org.springframework.context.ApplicationContext;<br />import org.springframework.context.support.ClassPathXmlApplicationContext;<br />import org.springframework.core.io.ClassPathResource;<br />import org.springframework.core.io.Resource;<br /><br />import pl.grzejszczak.marcin.camel.jaxb.PlayerDetailsConverter;<br />import pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails;<br />import pl.grzejszczak.marcin.camel.manual.jms.Sender;<br /><br />public class ActiveMQRouter {<br /><br /> /**<br />  * @param args<br />  * @throws JMSException<br />  */<br /> public static void main(String[] args) throws Exception {<br />  ApplicationContext context = new ClassPathXmlApplicationContext("/camel/jmsApplicationContext.xml");<br />  @SuppressWarnings("unchecked")<br />  Sender&lt;PlayerDetails&gt; sender = (Sender&lt;PlayerDetails&gt;) context.getBean("originPlayerSender");<br /><br />  Resource resource = new ClassPathResource("/camel/RobertLewandowski.xml");<br /><br />  Scanner scanner = new Scanner(new File(resource.getURI())).useDelimiter("\\Z");<br />  String contents = scanner.next();<br /><br />  PlayerDetailsConverter converter = context.getBean(PlayerDetailsConverter.class);<br /><br />  sender.sendMessage(converter.unmarshal(contents));<br /> }<br />}</pre><pre class="brush:java"></pre>What we can see here is that we initialize the Spring context from the classpath and retrieve the bean named <span style="font-family: 'Courier New', Courier, monospace;">originPlayerSender</span>. This component is used for sending a message to the initial queue. In order to have a message to send we are retrieving a file <span style="font-family: 'Courier New', Courier, monospace;">RobertLewandowski.xml</span> from the classpath and read it to a String variable through the <span style="font-family: 'Courier New', Courier, monospace;">Scanner</span> class. Next we use our custom <span style="font-family: 'Courier New', Courier, monospace;">PlayerDetailsConverter</span> class to unmarshall the String contents into a <span style="font-family: 'Courier New', Courier, monospace;">PlayerDetails</span> object, which in effect is sent by the <span style="font-family: 'Courier New', Courier, monospace;">originPlayerSender</span> to the origin queue.<br /><br />Now let's take a look at the sender logic:<br /><br /><b>PlayerDetailsSenderImpl.java</b><br /><pre class="brush:java">package pl.grzejszczak.marcin.camel.manual.jms;<br /><br />import javax.jms.Destination;<br />import javax.jms.JMSException;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br />import org.springframework.beans.factory.annotation.Autowired;<br />import org.springframework.jms.core.JmsTemplate;<br />import org.springframework.stereotype.Component;<br /><br />import pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails;<br /><br />@Component<br />public class PlayerDetailsSenderImpl implements Sender&lt;PlayerDetails&gt; {<br /><br /> private static final Logger LOGGER = LoggerFactory.getLogger(PlayerDetailsSenderImpl.class);<br /><br /> private Destination destination;<br /><br /> @Autowired<br /> private JmsTemplate jmsTemplate;<br /><br /> @Override<br /> public void sendMessage(final PlayerDetails object) throws JMSException {<br />  LOGGER.debug("Sending [{}] to topic [{}]", new Object[] { object, destination });<br />  jmsTemplate.convertAndSend(destination, object);<br /> }<br /><br /> public Destination getDestination() {<br />  return destination;<br /> }<br /><br /> public void setDestination(Destination destination) {<br />  this.destination = destination;<br /> }<br /><br />}<br /><br /></pre>This class is implementing my <span style="font-family: 'Courier New', Courier, monospace;">Sender</span> interface that provides the <span style="font-family: 'Courier New', Courier, monospace;">sendMessage</span> function. We are using the <span style="font-family: 'Courier New', Courier, monospace;">JmsTemplate</span> object to convert and send the message to the given <span style="font-family: 'Courier New', Courier, monospace;">destination</span> that is injected via Spring.<br /><br />Ok, now that we've sent the message someone has to retrieve it:<br /><br /><b>ListenerImpl.java</b><br /><pre class="brush:java">package pl.grzejszczak.marcin.camel.manual.jms;<br /><br />import java.util.List;<br /><br />import javax.jms.BytesMessage;<br />import javax.jms.Message;<br />import javax.jms.MessageListener;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br />import org.springframework.beans.factory.annotation.Autowired;<br />import org.springframework.beans.factory.annotation.Qualifier;<br />import org.springframework.jms.support.converter.MessageConverter;<br />import org.springframework.stereotype.Component;<br /><br />import pl.grzejszczak.marcin.camel.enricher.Enrichable;<br />import pl.grzejszczak.marcin.camel.jaxb.Convertable;<br />import pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails;<br /><br />@Component<br />public class ListenerImpl implements MessageListener {<br /><br /> private static final Logger LOG = LoggerFactory.getLogger(ListenerImpl.class);<br /><br /> @Autowired<br /> private Convertable&lt;PlayerDetails&gt; playerDetailsConverter;<br /><br /> @Autowired<br /> private List&lt;Enrichable&lt;PlayerDetails&gt;&gt; listOfEnrichers;<br /><br /> @Autowired<br /> private MessageConverter messageConverter;<br /><br /> @Autowired<br /> @Qualifier("destinationPlayerSender")<br /> private Sender&lt;PlayerDetails&gt; sender;<br /><br /> @Override<br /> public void onMessage(Message message) {<br />  if (!(message instanceof BytesMessage)) {<br />   LOG.error("Wrong msg!");<br />   return;<br />  }<br /><br />  PlayerDetails playerDetails = null;<br />  try {<br />   playerDetails = (PlayerDetails) messageConverter.fromMessage(message);<br /><br />   LOG.debug("Enriching the input message");<br />   for (Enrichable&lt;PlayerDetails&gt; enrichable : listOfEnrichers) {<br />    enrichable.enrich(playerDetails);<br />   }<br />   LOG.debug("Enriched text message: [{}]", new Object[] { playerDetailsConverter.marshal(playerDetails) });<br />   sender.sendMessage(playerDetails);<br />  } catch (Exception e) {<br />   LOG.error("Exception occured", e);<br />  }<br /><br /> }<br /><br />}<br /><br /></pre>This class has the list of all the classes implementing the <span style="font-family: 'Courier New', Courier, monospace;">Enrichable</span> interface thanks to which it will provide the enrichment of the message without the necessity of knowing the amount of enrichers in the system. There is also the <span style="font-family: 'Courier New', Courier, monospace;">PlayerDetailsConverter</span> class that helps with marshalling and unmarshalling <span style="font-family: 'Courier New', Courier, monospace;">PlayerDetails</span>. Once the message is enriched it is sent to the destination queue through the bean that implements the <span style="font-family: 'Courier New', Courier, monospace;">Sender</span> interface and has the id of <span style="font-family: 'Courier New', Courier, monospace;">destinationPlayerSender</span>. It is important to remember that what we receive from the queue is a <span style="font-family: 'Courier New', Courier, monospace;">BytesMessage</span> thus that's why we are doing the initial check.<br /><br />Let's take a look at one of the enrichers (the other one is a setting another field in the <span style="font-family: 'Courier New', Courier, monospace;">PlayerDetails</span> object)<br /><br /><b>ClubEnricher.java</b><br /><pre class="brush:java">package pl.grzejszczak.marcin.camel.enricher;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br />import org.springframework.stereotype.Component;<br /><br />import pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails;<br /><br />@Component("ClubEnricher")<br />public class ClubEnricher implements Enrichable&lt;PlayerDetails&gt; {<br /><br /> private static final Logger LOGGER = LoggerFactory.getLogger(ClubEnricher.class);<br /><br /> @Override<br /> public void enrich(PlayerDetails inputObject) {<br />  LOGGER.debug("Enriching player [{}] with club data", new Object[] { inputObject.getSurname() });<br />  // Simulating accessing DB or some other service<br />  try {<br />   Thread.sleep(2000);<br />  } catch (InterruptedException e) {<br />   LOGGER.error("Exception while sleeping occured", e);<br />  }<br />  inputObject.setTeamName("Borussia Dortmund");<br /> }<br /><br />}<br /><br /></pre>As you can see the class is just simulating some access to the DB or any other service and afterwards is setting the team name in the input <span style="font-family: 'Courier New', Courier, monospace;">PlayerDetails </span>object.<br /><br />Let's now take a look a the conversion mechanism:<br /><br /><b>PlayerDetailsConverter.java</b><br /><pre class="brush:java">package pl.grzejszczak.marcin.camel.jaxb;<br /><br />import java.io.ByteArrayOutputStream;<br />import java.io.OutputStream;<br /><br />import javax.xml.bind.JAXBContext;<br />import javax.xml.bind.JAXBException;<br />import javax.xml.bind.Marshaller;<br />import javax.xml.bind.Unmarshaller;<br /><br />import org.apache.activemq.util.ByteArrayInputStream;<br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br />import org.springframework.stereotype.Component;<br /><br />import pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails;<br /><br />@Component("PlayerDetailsConverter")<br />public class PlayerDetailsConverter implements Convertable&lt;PlayerDetails&gt; {<br /> private static final Logger LOGGER = LoggerFactory.getLogger(PlayerDetailsConverter.class);<br /><br /> private final JAXBContext jaxbContext;<br /> private final Marshaller jaxbMarshaller;<br /> private final Unmarshaller jaxbUnmarshaller;<br /><br /> public PlayerDetailsConverter() throws JAXBException {<br />  jaxbContext = JAXBContext.newInstance(PlayerDetails.class);<br />  jaxbMarshaller = jaxbContext.createMarshaller();<br />  jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);<br />  jaxbUnmarshaller = jaxbContext.createUnmarshaller();<br /> }<br /><br /> @Override<br /> public String marshal(PlayerDetails object) {<br />  OutputStream stream = new ByteArrayOutputStream();<br />  try {<br />   jaxbMarshaller.marshal(object, stream);<br />  } catch (JAXBException e) {<br />   LOGGER.error("Exception occured while marshalling", e);<br />  }<br />  return stream.toString();<br /> }<br /><br /> @Override<br /> public PlayerDetails unmarshal(String objectAsString) {<br />  try {<br />   return (PlayerDetails) jaxbUnmarshaller.unmarshal(new ByteArrayInputStream(objectAsString.getBytes()));<br />  } catch (JAXBException e) {<br />   LOGGER.error("Exception occured while marshalling", e);<br />  }<br />  return null;<br /> }<br /><br />}<br /><br /></pre>In the constructor we are setting some <span style="font-family: 'Courier New', Courier, monospace;">JAXB</span> components - the <span style="font-family: 'Courier New', Courier, monospace;">JAXBContext</span>,&nbsp;JAXB&nbsp;<span style="font-family: 'Courier New', Courier, monospace;">Marshaller</span> and&nbsp;JAXB&nbsp;<span style="font-family: 'Courier New', Courier, monospace;">Unmarshaller&nbsp;</span>that&nbsp;have the necessary marshal and unmarshal methods.<br /><br />Last but not least is the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">FinalListenerImpl</span> that is listening to the inbound message from the destination queue and shuts the application.<br /><br /><b>FinalListenerImpl.java</b><br /><pre class="brush:java">package pl.grzejszczak.marcin.camel.manual.jms;<br /><br />import javax.jms.BytesMessage;<br />import javax.jms.Message;<br />import javax.jms.MessageListener;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br />import org.springframework.beans.factory.annotation.Autowired;<br />import org.springframework.jms.support.converter.MessageConverter;<br />import org.springframework.stereotype.Component;<br /><br />import pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails;<br /><br />@Component<br />public class FinalListenerImpl implements MessageListener {<br /><br /> private static final Logger LOG = LoggerFactory.getLogger(FinalListenerImpl.class);<br /><br /> @Autowired<br /> private MessageConverter messageConverter;<br /><br /> @Override<br /> public void onMessage(Message message) {<br />  if (!(message instanceof BytesMessage)) {<br />   LOG.error("Wrong msg!");<br />   return;<br />  }<br /><br />  PlayerDetails playerDetails = null;<br />  try {<br />   playerDetails = (PlayerDetails) messageConverter.fromMessage(message);<br /><br />   if (playerDetails.getTeamName() != null) {<br />    LOG.debug("Message already enriched! Shutting down the system");<br />    System.exit(0);<br />   } else {<br />    LOG.debug("The message should have been enriched but wasn't");<br />    System.exit(1);<br />   }<br /><br />  } catch (Exception e) {<br />   LOG.error("Exception occured", e);<br />  }<br /><br /> }<br /><br />}<br /><br /></pre>By using the <span style="font-family: Courier New, Courier, monospace;">MessageConverter</span>, after having verified if the message is of proper type, we check if the team name has already been filled in - if that is the case we are terminating the application.<br /><br />And the logs are as follows:<br /><br /><pre class="brush:xml">2012-11-05 [main] org.springframework.context.support.ClassPathXmlApplicationContext:495 Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@34fbb7cb: startup date [Mon Nov 05 21:47:00 CET 2012]; root of context hierarchy<br />2012-11-05 [main] org.springframework.beans.factory.xml.XmlBeanDefinitionReader:315 Loading XML bean definitions from class path resource [camel/jmsApplicationContext.xml]<br />2012-11-05 [main] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:177 Loading properties file from class path resource [camel/jms.properties]<br />2012-11-05 [main] org.springframework.beans.factory.support.DefaultListableBeanFactory:557 Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3313beb5: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,myRoute,AgeEnricher,ClubEnricher,PlayerDetailsConverter,finalListenerImpl,listenerImpl,playerDetailsSenderImpl,org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,activeMQConnectionFactory,cachingConnectionFactory,origin,destination,producerTemplate,originPlayerSender,destinationPlayerSender,originListenerImpl,destinationListenerImpl,jmsOriginContainer,jmsDestinationContainer,oxmMessageConverter,marshaller,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy<br />2012-11-05 [main] org.springframework.oxm.jaxb.Jaxb2Marshaller:436 Creating JAXBContext with classes to be bound [class pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails]<br />2012-11-05 [main] org.springframework.context.support.DefaultLifecycleProcessor:334 Starting beans in phase 2147483647<br />2012-11-05 [main] org.springframework.jms.connection.CachingConnectionFactory:291 Established shared JMS Connection: ActiveMQConnection {id=ID:marcin-SR700-38535-1352148424687-1:1,clientId=null,started=false}<br />2012-11-05 [main] pl.grzejszczak.marcin.camel.manual.jms.PlayerDetailsSenderImpl:26 Sending [pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails@6ae2d0b2] to topic [queue://Initial.Queue]<br />2012-11-05 [jmsOriginContainer-1] pl.grzejszczak.marcin.camel.manual.jms.ListenerImpl:49 Enriching the input message<br />2012-11-05 [jmsOriginContainer-1] pl.grzejszczak.marcin.camel.enricher.AgeEnricher:17 Enriching player [Lewandowski] with age data<br />2012-11-05 [jmsOriginContainer-1] pl.grzejszczak.marcin.camel.enricher.ClubEnricher:16 Enriching player [Lewandowski] with club data<br />2012-11-05 [jmsOriginContainer-1] pl.grzejszczak.marcin.camel.manual.jms.ListenerImpl:53 Enriched text message: [&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;<br />&lt;PlayerDetails&gt;<br />    &lt;Name&gt;Robert&lt;/Name&gt;<br />    &lt;Surname&gt;Lewandowski&lt;/Surname&gt;<br />    &lt;Position&gt;ATT&lt;/Position&gt;<br />    &lt;Age&gt;19&lt;/Age&gt;<br />    &lt;TeamName&gt;Borussia Dortmund&lt;/TeamName&gt;<br />&lt;/PlayerDetails&gt;<br />]<br />2012-11-05 [jmsOriginContainer-1] pl.grzejszczak.marcin.camel.manual.jms.PlayerDetailsSenderImpl:26 Sending [pl.grzejszczak.marcin.camel.jaxb.generated.PlayerDetails@3dca1588] to topic [queue://Routed.Queue]<br />2012-11-05 [jmsDestinationContainer-1] pl.grzejszczak.marcin.camel.manual.jms.FinalListenerImpl:35 Message already enriched! Shutting down the system<br /><br /></pre><br /><br />This is how thanks to the Spring JMS module and the JAXB library you can easilly create JMS listeners, senders and message convertors for the XML messages.<br /><br /></div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Marcin Grzejszczak</span></span>

      








  


<time datetime="2012-11-05T02:29:00+01:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/java/'>java</a>, <a class='category' href='/blog/categories/jaxb/'>jaxb</a>, <a class='category' href='/blog/categories/jms/'>jms</a>, <a class='category' href='/blog/categories/jmstemplate/'>jmstemplate</a>, <a class='category' href='/blog/categories/spring/'>spring</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://toomuchcoding.com/blog/2012/11/05/spring-jms-message-automatic-conversion/" data-via="mgrzejszczak" data-counturl="http://toomuchcoding.com/blog/2012/11/05/spring-jms-message-automatic-conversion/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/10/28/spring-aop-in-security-controlling/" title="Previous Post: Spring AOP in security - controlling creation of UI components via aspects">&laquo; Spring AOP in security - controlling creation of UI components via aspects</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/11/06/sources-to-blog-posts/" title="Next Post: Sources to blog posts">Sources to blog posts &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p><img src="/images/ja.jpg" style="float:left;margin:5px;border-width:0px"/>Enthusiast of clean coding and good design. Author of "Mockito Instant" and "Mockito Cookbook" books. Contributor to several open source projects (including Rest-assured, Drools, Moco, Mockito). Co-author of the Groovy @Builder, "micro-infra-spring", "spring-cloud-zookeeper", "spring-cloud-sleuth" microservices related open source solutions. Author of Uptodate Gradle plugin, Spock subjects-collaborators extension and gradle-test-profiler open source projects. Co-founder of the Warsaw Groovy User Group. A member of the Most Valuable Blogger program at DZone and Java Code Geeks. Interested in working with JVM languages, XP-driven projects with continuous deployment and most preferably microservice architecture.</p>

  <p>Currently hacking <a href="https://github.com/spring-cloud/">Spring Cloud</a> at <a href="http://spring.io">Pivotal</a></p>

  <p>Co-organizer of the <a href="http://warsaw.gr8days.pl">Warsaw GR8 Day Conference</a></p>

  <p>Homepage:</p>
  <p><a href="http://marcin.grzejszczak.pl">http://marcin.grzejszczak.pl</a></p>

  <p>Github profile</p>
  <p><a href="https://github.com/marcingrzejszczak">https://github.com/marcingrzejszczak</a></p>

  <p>Lanyrd profile</p>
  <p><a href="http://lanyrd.com/profile/marcin-grzejszczak">http://lanyrd.com/profile/marcin-grzejszczak</a></p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/03/03/goodbye-blogspot-welcome-octopress/">Goodbye Blogspot welcome Octopress!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/27/json-assert-lib-released/">JSON Assert lib released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/04/post-on-spring-blog/">Post on Spring blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/16/business-value-gone-wild/">Business value gone wild</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/27/microservice-deployment/">Microservice Deployment</a>
      </li>
    
  </ul>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/108408840893580782990?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Marcin Grzejszczak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'toomuchcoding';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://toomuchcoding.com/blog/2012/11/05/spring-jms-message-automatic-conversion/';
        var disqus_url = 'http://toomuchcoding.com/blog/2012/11/05/spring-jms-message-automatic-conversion/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
