<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>TOO MUCH CODING</title>
  <meta name="author" content="Marcin Grzejszczak">

  
  

  <!-- https://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://toomuchcoding.com/posts/7/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="TOO MUCH CODING" type="application/atom+xml">

  <!-- https://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://toomuchcoding.com/posts/7/">
  <meta property="og:title" content="TOO MUCH CODING">
  <meta property="og:description" content="A blog for coding addicts about Java, Groovy, Buzzword, Spring, Microservices, Buzzword">

  <script src="/javascripts/libs/jquery/jquery-2.1.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">


  
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  

</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">TOO MUCH CODING</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                <li >
                    <a href="/oss">OSS</a>
                </li>
                <li >
                    <a href="/abstracts">Abstracts</a>
                </li>
                <li >
                    <a href="/talks">Talks</a>
                </li>
                <li >
                    <a href="/publications">Publications</a>
                </li>
                <li >
                    <a href="/bio">Bio</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="sitesearch" value="https://toomuchcoding.com">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index" itemscope itemtype="https://schema.org/Blog">
    <meta itemprop="name" content="TOO MUCH CODING" />
    <meta itemprop="description" content="A blog for coding addicts about Java, Groovy, Buzzword, Spring, Microservices, Buzzword" />
    <meta itemprop="url" content="https://toomuchcoding.com" />
      
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        










<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-10-23T00:36:00+02:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
           | <a href="/articles/2012/10/23/spring-beanpostprocessor-for-specified/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="https://toomuchcoding.com/articles/2012/10/23/spring-beanpostprocessor-for-specified/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/articles/2012/10/23/spring-beanpostprocessor-for-specified/" itemprop="url">Spring BeanPostProcessor for a specified type</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div class='post'>
<br /><br />I was recently having a discussion how can one use a BeanPostProcessor to execute some logic for a specified class.<br />
<!--more-->
<br />Looking at the Javadoc for the BeanPostProcessor one can read that:<br /><blockquote class="tr_bq"><span style="background-color: white; font-family: Arial; font-size: 13px;">Factory hook that allows for custom modification of new bean instances, e.g. checking for marker interfaces or wrapping them with proxies.</span></blockquote>So how can one create in an easy way a BeanPostProcessor for a precise type without creating a cascade of ifs or instance ofs? This is my concept of solving this problem - perhaps you know an easier one? :)<br /><br /><b>SomeService.java</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin.postprocessor;<br /><br />public interface SomeService {<br /> void methodA();<br /><br /> void methodB();<br />}<br /></pre><br /><b>SomeServiceImpl.java</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin.postprocessor;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br /><br />public class SomeServiceImpl implements SomeService {<br /> private static final Logger LOGGER = LoggerFactory.getLogger(SomeServiceImpl.class);<br /><br /> public SomeServiceImpl() {<br />  LOGGER.debug("SomeServiceImpl - I'm created!");<br /> }<br /><br /> private void afterInit() {<br />  LOGGER.debug("SomeServiceImpl - After init!");<br /> }<br /><br /> private void destroyMethod() {<br />  LOGGER.debug("SomeServiceImpl - Destroy Method!");<br /> }<br /><br /> @Override<br /> public void methodA() {<br />  LOGGER.debug("SomeServiceImpl - Method A executed");<br /> }<br /><br /> @Override<br /> public void methodB() {<br />  LOGGER.debug("SomeServiceImpl - Method B executed");<br /> }<br /><br />}<br /></pre><br /><b>SomeOtherService.java</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin.postprocessor;<br /><br />public interface SomeOtherService {<br /> void methodC();<br /><br /> void methodD();<br />}<br /></pre><br /><b>SomeOtherServiceImpl.java</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin.postprocessor;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br /><br />public class SomeOtherServiceImpl implements SomeOtherService {<br /> private static final Logger LOGGER = LoggerFactory.getLogger(SomeOtherServiceImpl.class);<br /><br /> public SomeOtherServiceImpl() {<br />  LOGGER.debug("SomeOtherServiceImpl - I'm created!");<br /> }<br /><br /> private void afterInit() {<br />  LOGGER.debug("SomeOtherServiceImpl - After init!");<br /> }<br /><br /> private void destroyMethod() {<br />  LOGGER.debug("SomeOtherServiceImpl - Destroy Method!");<br /> }<br /><br /> @Override<br /> public void methodC() {<br />  LOGGER.debug("SomeOtherServiceImpl - Method C executed");<br /> }<br /><br /> @Override<br /> public void methodD() {<br />  LOGGER.debug("SomeOtherServiceImpl - Method D executed");<br /> }<br /><br />}<br /></pre><br /><b>AbstractBeanPostProcessor.java</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin.postprocessor;<br /><br />import org.springframework.beans.BeansException;<br />import org.springframework.beans.factory.config.BeanPostProcessor;<br /><br />public abstract class AbstractBeanPostProcessor&lt;T&gt; implements BeanPostProcessor {<br /><br /> private Class&lt;T&gt; clazz;<br /><br /> public AbstractBeanPostProcessor(Class&lt;T&gt; clazz) {<br />  this.clazz = clazz;<br /> }<br /><br /> @Override<br /> public Object postProcessAfterInitialization(Object bean, String name) throws BeansException {<br />  checkConditions();<br /><br />  if (clazz.isAssignableFrom(bean.getClass())) {<br />   doAfter();<br />  }<br />  return bean;<br /> }<br /><br /> @Override<br /> public Object postProcessBeforeInitialization(Object bean, String name) throws BeansException {<br />  checkConditions();<br /><br />  if (clazz.isAssignableFrom(bean.getClass())) {<br />   doBefore();<br />  }<br />  return bean;<br /> }<br /><br /> private void checkConditions() {<br />  if (clazz == null) {<br />   throw new NullArgumentException("Provide the interface for the post processor");<br />  }<br /> }<br /><br /> public abstract void doBefore();<br /><br /> public abstract void doAfter();<br /><br />}<br /></pre><br /><b>SomeServicePostProcessor.java</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin.postprocessor;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br />import org.springframework.stereotype.Component;<br /><br />@Component<br />public class SomeServicePostProcessor extends AbstractBeanPostProcessor&lt;SomeService&gt; {<br /><br /> private static final Logger LOGGER = LoggerFactory.getLogger(SomeServicePostProcessor.class);<br /><br /> public SomeServicePostProcessor() {<br />  super(SomeService.class);<br /> }<br /><br /> @Override<br /> public void doBefore() {<br />  LOGGER.info("BEFORE it's init method has been executed but AFTER SomeServiceImpl has been instantiated I would like to do sth...");<br /> }<br /><br /> @Override<br /> public void doAfter() {<br />  LOGGER.info("AFTER SomeServiceImpl has executed its init method I would like to do sth more...");<br /> }<br />}<br /></pre><br /><b>SpringMain.java</b><br /><b><br /></b><br /><pre class="brush:java">package pl.grzejszczak.marcin.postprocessor;<br /><br />import org.springframework.context.ConfigurableApplicationContext;<br />import org.springframework.context.support.ClassPathXmlApplicationContext;<br /><br />public class SpringMain {<br /><br /> public static void main(String[] args) {<br />  ConfigurableApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");<br />  SomeService someService = context.getBean(SomeService.class);<br />  someService.methodA();<br />  someService.methodB();<br />  SomeOtherService someOtherService = context.getBean(SomeOtherService.class);<br />  someOtherService.methodC();<br />  someOtherService.methodD();<br />  context.close();<br /> }<br />}<br /></pre><br /><br /><b>ApplicationContext.xml</b><br /><br /><pre class="brush:xml"><beans xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance" xmlns="https://www.springframework.org/schema/beans" xsi:schemalocation="https://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans-3.0.xsd"><br /><br /> &lt;bean class="pl.grzejszczak.marcin.postprocessor.SomeServiceImpl" destroy-method="destroyMethod" init-method="afterInit"/&gt;<br /> &lt;bean class="pl.grzejszczak.marcin.postprocessor.SomeOtherServiceImpl" destroy-method="destroyMethod" init-method="afterInit"/&gt;<br /> &lt;bean class="pl.grzejszczak.marcin.postprocessor.SomeServicePostProcessor"/&gt;<br /></beans><br /></pre><br /><b>Logs</b><br /><br /><pre class="brush:xml">2012-10-23 00:20:38,863 INFO  [main] org.springframework.context.support.ClassPathXmlApplicationContext:495 Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@28d11816: startup date [Tue Oct 23 00:20:38 CEST 2012]; root of context hierarchy<br />2012-10-23 00:20:38,956 INFO  [main] org.springframework.beans.factory.xml.XmlBeanDefinitionReader:315 Loading XML bean definitions from class path resource [applicationContext.xml]<br />2012-10-23 00:20:39,213 INFO  [main] org.springframework.beans.factory.support.DefaultListableBeanFactory:557 Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6bb4469: defining beans [pl.grzejszczak.marcin.postprocessor.SomeServiceImpl#0,pl.grzejszczak.marcin.postprocessor.SomeOtherServiceImpl#0,pl.grzejszczak.marcin.postprocessor.SomeServicePostProcessor#0]; root of factory hierarchy<br />2012-10-23 00:20:39,214 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeServiceImpl:10 SomeServiceImpl - I'm created!<br />2012-10-23 00:20:39,215 INFO  [main] pl.grzejszczak.marcin.postprocessor.SomeServicePostProcessor:18 BEFORE its init method has been executed but AFTER SomeServiceImpl has been instantiated I would like to do sth...<br />2012-10-23 00:20:39,216 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeServiceImpl:14 SomeServiceImpl - After init!<br />2012-10-23 00:20:39,216 INFO  [main] pl.grzejszczak.marcin.postprocessor.SomeServicePostProcessor:23 AFTER SomeServiceImpl has executed its init method I would like to do sth more...<br />2012-10-23 00:20:39,220 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeOtherServiceImpl:10 SomeOtherServiceImpl - I'm created!<br />2012-10-23 00:20:39,221 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeOtherServiceImpl:14 SomeOtherServiceImpl - After init!<br />2012-10-23 00:20:39,225 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeServiceImpl:23 SomeServiceImpl - Method A executed<br />2012-10-23 00:20:39,241 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeServiceImpl:28 SomeServiceImpl - Method B executed<br />2012-10-23 00:20:39,242 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeOtherServiceImpl:23 SomeOtherServiceImpl - Method C executed<br />2012-10-23 00:20:39,242 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeOtherServiceImpl:28 SomeOtherServiceImpl - Method D executed<br />2012-10-23 00:20:39,242 INFO  [main] org.springframework.context.support.ClassPathXmlApplicationContext:1020 Closing org.springframework.context.support.ClassPathXmlApplicationContext@28d11816: startup date [Tue Oct 23 00:20:38 CEST 2012]; root of context hierarchy<br />2012-10-23 00:20:39,243 INFO  [main] org.springframework.beans.factory.support.DefaultListableBeanFactory:433 Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6bb4469: defining beans [pl.grzejszczak.marcin.postprocessor.SomeServiceImpl#0,pl.grzejszczak.marcin.postprocessor.SomeOtherServiceImpl#0,pl.grzejszczak.marcin.postprocessor.SomeServicePostProcessor#0]; root of factory hierarchy<br />2012-10-23 00:20:39,244 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeOtherServiceImpl:18 SomeOtherServiceImpl - Destroy Method!<br />2012-10-23 00:20:39,245 DEBUG [main] pl.grzejszczak.marcin.postprocessor.SomeServiceImpl:18 SomeServiceImpl - Destroy Method!<br /></pre>As you can see it is quite easy, using generics and the BeanPostProcessor, to specify certain behavors for a given type (generics and constructor of SomeServiceImpl) or a group of types of classes (generics and constructor of SomeService).</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        










<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-10-17T15:43:00+02:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
           | <a href="/articles/2012/10/17/interesting-articles/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="https://toomuchcoding.com/articles/2012/10/17/interesting-articles/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/articles/2012/10/17/interesting-articles/" itemprop="url">Interesting articles</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div class='post'>
<br />Since one of my aims of starting a blog was to treat it as a notepad or a storage place for some interesting concepts regarding programming&nbsp;I recommend reading these articles:<br /><br /><a href="https://java.dzone.com/articles/how-tune-java-garbage">How to tune Java Garbage Collector</a><br /><a href="https://java.dzone.com/articles/nosql-week-review">NoSQL week review</a><br /><a href="https://java.dzone.com/articles/javascript-and-jquery">Javascript and jQuery</a><br /><br /></div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        










<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-10-16T19:14:00+02:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
           | <a href="/articles/2012/10/16/calculating-coherence-cluster-size-on/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="https://toomuchcoding.com/articles/2012/10/16/calculating-coherence-cluster-size-on/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/articles/2012/10/16/calculating-coherence-cluster-size-on/" itemprop="url">Calculating Coherence cluster size on a remote server using JMX</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div class='post'>
<br /><br />In one of the projects I had a problem regarding calculating the size of a Oracle Coherence cluster. It doesn't seem to difficult since there is already a nice piece of code that can do it for us:<br />
<!--more-->
<br /><a href="https://code.google.com/p/coherence-tools/source/browse/trunk/main/src/com/seovic/coherence/util/CalculateCacheSize.java?r=147">Calculating Coherence cluster size</a><br /><br />The problem is that this code is working properly only if the Coherence cluster is not remote. So how can we access it?<br /><br />We have to modify the following function<br /><br /><pre class="brush: java"><br />public static MBeanServer getMBeanServer() {<br />        MBeanServer server = null;<br />        for (Object o : MBeanServerFactory.findMBeanServer(null)) {<br />            server = (MBeanServer) o;<br />            if (DOMAIN_DEFAULT.length() == 0 ||<br />                server.getDefaultDomain().equals(DOMAIN_DEFAULT)) {<br />                break;<br />            }<br />            server = null;<br />        }<br />        if (server == null) {<br />            server = MBeanServerFactory.createMBeanServer(DOMAIN_DEFAULT);<br />        }<br /><br />        return server;<br />    }<br /></pre><br /><br />To this one <br /><pre class="brush: java"><br />public static MBeanServerConnection getMBeanServer() throws IOException {<br /> JMXServiceURL url = new JMXServiceURL("service://...");<br /> JMXConnector jmxc = JMXConnectorFactory.connect(url, null);<br /> return jmxc.getMBeanServerConnection();<br />}<br /></pre><br />And modify the line  <br /><br /><pre class="brush: java"><br />MBeanServer server = getMBeanServer();<br /></pre><br /><br />To use the new interface <br /><pre class="brush: java"><br />MBeanServerConnection server = getMBeanServer();<br /></pre><br />More information on how to define the Coherence JMX service URL and JMX for Coherence as such can be found here  <br /><br /><a href="https://coherence.oracle.com/display/COH32UG/Managing+Coherence+using+JMX">Managing Coherence using JMX</a>  </div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        










<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-10-07T22:47:00+02:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
           | <a href="/articles/2012/10/07/simulation-of-time-consuming-actions-in/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="https://toomuchcoding.com/articles/2012/10/07/simulation-of-time-consuming-actions-in/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/articles/2012/10/07/simulation-of-time-consuming-actions-in/" itemprop="url">Simulation of time consuming actions in integration tests</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div class='post'>
<br /><br />Hi!<br /><br />Quite recently in one of my projects I had a situation in which I needed to create an integration test for the application. That's not very odd isn't it? :)<br /><br />What was interesting was the fact that the logic of the app involved some concurrency issues and one of the components had to connect to an external service which would take a couple of seconds. Since in the integration test there was no need to make the actual connection, the component needed to be mocked. What about the simulation of the time consuming action? Well, let's take a look at the way I did it...<br />
<!--more-->
<br /><b>The task.</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br /><br />/**<br /> * Service that does some things including processing of the external service<br /> * <br /> * @author marcin<br /> * <br /> */<br />public class SomeTask implements Runnable {<br /><br /> private static final Logger LOGGER = LoggerFactory.getLogger(SomeTask.class);<br /><br /> // Service is injected via a dependency injection system<br /> private Processable timeConsumingExternalService;<br /><br /> private void methodThatConnectsToExternalServices() {<br />  // connects to an external service and spends a couple of seconds there<br />  LOGGER.debug("Before processing");<br />  timeConsumingExternalService.process();<br />  LOGGER.debug("After processing");<br />  // some other things to do<br /> }<br /><br /> public void run() {<br />  methodThatConnectsToExternalServices();<br /> }<br /><br /> public void setTimeConsumingExternalService(Processable timeConsumingExternalService) {<br />  this.timeConsumingExternalService = timeConsumingExternalService;<br /> }<br /><br />}</pre><b>The integration test.</b><br /><br /><pre class="brush:java">package pl.grzejszczak.marcin;<br /><br />import java.util.concurrent.ExecutorService;<br />import java.util.concurrent.Executors;<br /><br />import org.mockito.Mockito;<br />import org.mockito.invocation.InvocationOnMock;<br />import org.mockito.stubbing.Answer;<br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br /><br />public class ServiceIntegrationTest {<br /><br /> private static final Logger LOGGER = LoggerFactory.getLogger(ServiceIntegrationTest.class);<br /><br /> private ExecutorService executorService = Executors.newCachedThreadPool();<br /> private Processable timeConsumingExternalServiceMock = Mockito.mock(Processable.class);<br /> private SomeTask someTask = new SomeTask();<br /><br /> public ServiceIntegrationTest() {<br />  initializeMocks();<br /> }<br /><br /> private void initializeMocks() {<br />  Mockito.doAnswer(new Answer&lt;Object&gt;() {<br />   public Object answer(InvocationOnMock invocation) throws Throwable {<br />    // Simulation of connection to external services<br />    LOGGER.debug("Sleeping");<br />    Thread.sleep(5000);<br />    LOGGER.debug("Stopped Sleeping");<br />    return null;<br />   }<br />  }).when(timeConsumingExternalServiceMock).process();<br />  // Inject the mock to the Task - in any possible way<br />  someTask.setTimeConsumingExternalService(timeConsumingExternalServiceMock);<br /> }<br /><br /> public void executeTest() {<br />  executorService.execute(someTask);<br /> }<br /><br /> public static void main(String args[]) {<br />  ServiceIntegrationTest integrationTest = new ServiceIntegrationTest();<br />  integrationTest.executeTest();<br /> }<br />}<br /></pre><br /><br />And the output to the console:<br /><br />2012-10-07 22:42:37,378 DEBUG pl.grzejszczak.marcin.SomeTask:21 Before processing<br />2012-10-07 22:42:37,389 DEBUG pl.grzejszczak.marcin.ServiceIntegrationTest:28 Sleeping<br />2012-10-07 22:42:42,390 DEBUG pl.grzejszczak.marcin.ServiceIntegrationTest:30 Stopped Sleeping<br />2012-10-07 22:42:42,392 DEBUG pl.grzejszczak.marcin.SomeTask:23 After processing<br /><br />Let's take a closer look at the most important part in which an Answer for the execution of the service is being created  <br /><pre class="brush:java">Mockito.doAnswer(new Answer&lt;Object&gt;() {<br />   public Object answer(InvocationOnMock invocation) throws Throwable {<br />    // Simulation of connection to external services<br />    LOGGER.debug("Sleeping");<br />    Thread.sleep(5000);<br />    LOGGER.debug("Stopped Sleeping");<br />    return null;<br />   }<br />  }).when(timeConsumingExternalServiceMock).process();<br /></pre><br />This piece of code changes the default action that should be done by the given object on a given method execution. In this particular case we had to mock a method that returns void - that's why we start with doAnswer(...) and finish with when(...).process(). <br /><br />That is how inside the integration test I managed to create a simulation of waiting for the service to finish. If you have any ideas or comments on how you would do it in another way please feel free to post a comment below :) </div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        










<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-10-06T23:07:00+02:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
           | <a href="/articles/2012/10/06/and-so-we-code/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="https://toomuchcoding.com/articles/2012/10/06/and-so-we-code/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/articles/2012/10/06/and-so-we-code/" itemprop="url">And so we code...</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div class='post'>
Hi! My name is Marcin and I'm a software developer at Rule Financial. Since I'm a coding addict when I'm not coding in Java I'm coding in Java. In addition to that I'm developing websites (including <a href="https://www.grzejszczak.pl/">Ryszard Grzejszczak's Lawyer's office</a>, <a href="https://csw.uni.lodz.pl/">Center for Electoral Studies at University of Lodz</a>, <a href="https://www.dfprivate.pl/">DF Private Financial Advisory</a>). This blog will be about some of the issues that I found in my projects (the majority of those projects you can find on <a href="https://www.marcin.grzejszczak.pl/">my website</a>) and the ways that I delt with them.<br /><br />So... To all the coding junkies out there...<br /><br /><div class="separator" style="clear: both; text-align: center;"><object class="BLOGGER-youtube-video" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" data-thumbnail-src="https://3.gvt0.com/vi/Eq3CuMDXaPs/0.jpg" height="266" width="320"><param name="movie" value="https://www.youtube.com/v/Eq3CuMDXaPs&fs=1&source=uds" /><param name="bgcolor" value="#FFFFFF" /><param name="allowFullScreen" value="true" /><embed width="320" height="266"  src="https://www.youtube.com/v/Eq3CuMDXaPs&fs=1&source=uds" type="application/x-shockwave-flash" allowfullscreen="true"></embed></object></div><br /></div>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous disabled"><a href="#">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/posts/6">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
        <section>
  <h1>About Me</h1>
  <p><img src="/images/ja.jpeg" style="float:left;margin:5px;border-width:0px;width:100%;height:100%"/>
  Co-author of <a href="https://smarttesting.pl">SmartTesting</a>, author of <a href="https://learning.oreilly.com/videos/hands-on-guide-to/9780135598436">Hands-On Guide to Spring Cloud Contract: Creating Consumer-Driven Contracts to Leverage Contract Tests and Improve Your Code</a> and co-author of <a href="https://bit.ly/appliedCD">Applied Continuous Delivery Live Lessons</a>. Co-founder of the Warsaw Groovy User Group, <a href="https://www.meetup.com/Warsaw-Cloud-Native-Meetup/">Warsaw Cloud Native Meetup</a> and the <a href="https://www.diverseit.io">DiverseIT</a> initiative. Author of <a href="https://www.packtpub.com/application-development/instant-mockito">"Mockito Instant"</a> and <a href="https://www.packtpub.com/application-development/mockito-cookbook">"Mockito Cookbook"</a> books.
  </p>

  <p>
  Lead of <a href="https://cloud.spring.io/spring-cloud-sleuth/">Spring Cloud Sleuth</a>, <a href="https://cloud.spring.io/spring-cloud-contract/">Spring Cloud Contract</a> and <a href="https://spring.io/blog/2018/11/13/spring-cloud-pipelines-to-cloud-pipelines-migration">Cloud Pipelines</a> projects at <a href="https://spring.io">VMware</a>
  </p>

  <p><a href="https://github.com/marcingrzejszczak">Github profile</a></p>

  <p><a href="https://twitter.com/MGrzejszczak">Twitter: @MGrzejszczak</a></p>

  <p><a href="https://www.goodreads.com/author/show/7284553.Marcin_Grzejszczak">Goodreads account</a></p>
</section>

      </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2021 - Marcin Grzejszczak<br>
  <small>
      <span class="credit">Powered by <a href="https://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'toomuchcoding';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
</html>
